__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]);const l=(0,n.extendStyles)(s.baseThermalStylesFn,({dls19:t})=>({thermalContainer:{borderRadius:t.cornerRadius.small},thermal:{backgroundImage:`radial-gradient(circle at center,\n      ${t.palette.rausch_gradient_stop_0} 0%,\n      ${t.palette.rausch_gradient_stop_1} 27.5%,\n      ${t.palette.rausch_gradient_stop_2} 40%,\n      ${t.palette.rausch_gradient_stop_3} 57.5%,\n      ${t.palette.rausch_gradient_stop_4} 75%,\n      ${t.palette.rausch_gradient_stop_4} 100%\n    )`}}));var _=(0,t.withStyles)(l)(s.BaseThermal);e.default=_}),7536662,[5046337,5046346,7536663]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseThermalStylesFn=e.BaseThermal=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1])),s=r(d[2]),l=r(d[3]),o=r(d[4]);const c=(0,n.default)((t,n,s,l)=>{s(t),l(n)},60);e.BaseThermal=({css:n,styles:s,children:u,disabled:h,linariaClassNames:p})=>{const[f,b]=t.default.useState(0),[y,v]=t.default.useState(0),[k,S]=t.default.useState(!1),w=t.default.useRef(null),{CSS:x}=window||{},C=(0,l.useCx)();t.default.useEffect(()=>{S(x&&x.supports&&x.supports('color: var(--)')||!1)},[x]);const j=t.default.useCallback(t=>{if(t.persist(),t.target instanceof Element){const{left:n,width:s,top:l,height:o}=t.target.getBoundingClientRect(),u=(t.clientX-n)/s*100,h=(t.clientY-l)/o*100;k?w.current&&(w.current.style.setProperty('--mouse-x',String(u)),w.current.style.setProperty('--mouse-y',String(h))):c(u,h,b,v)}},[k]);if(h)return(0,o.jsx)(o.Fragment,{children:u});const F=k?'calc((100 - var(--mouse-x, 0)) * 1%) calc((100 - var(--mouse-y, 0)) * 1%)':`${100-f}% ${100-y}%`;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:C(null==p?void 0:p.thermalContainer),...n(s.thermalContainer),children:(0,o.jsx)("span",{ref:w,className:C(null==p?void 0:p.thermal),...n(s.thermal),style:{backgroundPosition:F},onMouseMove:j})}),(0,o.jsx)("span",{className:C(null==p?void 0:p.content),...n(s.content),children:u})]})};const u=(0,s.extendableStyleFn)(()=>({thermalContainer:{position:'absolute',top:0,left:0,right:0,bottom:0,width:'100%',height:'100%',overflow:'hidden','-webkit-mask-image':'-webkit-radial-gradient(white, black)'},thermal:{display:'block',width:'100%',height:'100%',minWidth:'200px',backgroundSize:'200% 200%',opacity:0,transition:'opacity 1.25s',backgroundImage:'linear-gradient(to right, black 0%, white 50%, black 100%)',':hover':{opacity:1},':active':{transition:'transform 2s, opacity 2s',opacity:0,transform:'scale(5.0)'}},content:{display:'block',position:'relative',pointerEvents:'none'}}));e.baseThermalStylesFn=u}),7536663,[196613,5963980,5046346,5111838,5046332]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(0,babelHelpers.interopRequireDefault(r(d[0])).default)({svgContents:"<g fill=\"none\"><path d=\"m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9\" /></g>",svgProps:{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"}},'IcSystemSearchStroked',{});e.default=t}),60096544,[5046367]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n){const c=t.default.useRef(n),f=t.default.useRef(u);u!==f.current&&(c.current=f.current,f.current=u);return c.current};var t=babelHelpers.interopRequireDefault(r(d[0]))}),61800471,[196613]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchSubmitBehaviorContext=void 0;const t=babelHelpers.interopRequireDefault(r(d[0])).default.createContext('default');e.SearchSubmitBehaviorContext=t,t.displayName='SearchSubmitBehaviorContext'}),62062656,[196613]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f){const l=(0,u.default)(f);(0,t.useEffect)(()=>l,[])};var t=r(d[0]),u=babelHelpers.interopRequireDefault(r(d[1]))}),62062668,[196613,7274586]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SatoriLogger=void 0;var t=babelHelpers.interopRequireDefault(r(d[0]));function s(){const t=r(d[1]);return s=function(){return t},t}function n(){const t=r(d[2]);return n=function(){return t},t}function o(){const t=r(d[3]);return o=function(){return t},t}var l=babelHelpers.interopRequireDefault(r(d[4])),u=babelHelpers.interopRequireDefault(r(d[5])),c=babelHelpers.interopRequireDefault(r(d[6])),_=babelHelpers.interopRequireDefault(r(d[7])),p=r(d[8]),f=r(d[9]),v=r(d[10]),h=babelHelpers.interopRequireDefault(r(d[11]));function y({filters:t,id:s,path:n,vertical:o}){return{filters:t,id:s,path:n,vertical:o}}function k(t){return Array.isArray(t)?t.map(({offset:t,value:s})=>({location_offset:t,location_term:s})):t}function S(t){return'number'==typeof t?t:-1}function b(t,s){var n,o,l,u,_;const f=t,h=t,b=null==f||null===(n=f.refinements)||void 0===n?void 0:n[0],P=null==t?void 0:t.source;return{location_name:null!==(o=null==t||null===(l=t.searchParams)||void 0===l?void 0:l.query)&&void 0!==o?o:'',display_name:t.name,source:null==t?void 0:t.source,position:S(s),api_place_id:null==t||null===(u=t.searchParams)||void 0===u?void 0:u.place_id,refinements:null==t||null===(_=t.searchParams)||void 0===_?void 0:_.refinement_paths,current_refinement_vertical:null==f?void 0:f.currentVertical,listing_id:(0,v.isPDPResult)(t)?t.pdpDetails.listing_id:void 0,location_terms:k(null==f?void 0:f.locationTerms),location_types:null==f?void 0:f.locationTypes,full_refinement:b?y(b):void 0,saved_search_id:P===p.SAVED_SEARCH_TYPE?t.key:void 0,id:null==t?void 0:t.key,item_offset_within_section:(0,c.default)(t,'itemOffsetWithinSection'),type:null==t?void 0:t.searchType,title:(0,c.default)(t,'sectionTitle'),max_num_rows:String((0,c.default)(t,'sectionMaxNumRows')),sub_title:(null==h?void 0:h.subtitle)||(null==f?void 0:f.description)}}function P(t){return null==t?'':String(t)}function x(t,s){return P((0,c.default)(t,"refinements[0]."+s))}function I(t,s){return(t||[]).map(t=>x(t,s))}function T(t,s){var n,o,l,u,_;const f=t,h=t,b=null==f||null===(n=f.refinements)||void 0===n?void 0:n[0],P=null==t?void 0:t.source;return{location_name:null!==(o=null==t||null===(l=t.searchParams)||void 0===l?void 0:l.query)&&void 0!==o?o:'',display_name:t.name,source:null==t?void 0:t.source,position:S(s),api_place_id:null==t||null===(u=t.searchParams)||void 0===u?void 0:u.place_id,refinements:null==t||null===(_=t.searchParams)||void 0===_?void 0:_.refinement_paths,current_refinement_vertical:null==f?void 0:f.currentVertical,location_types:null==f?void 0:f.locationTypes,location_terms:k(null==f?void 0:f.locationTerms),full_refinement:b?y(b):void 0,saved_search_id:P===p.SAVED_SEARCH_TYPE?t.key:void 0,suggestion_type:t.suggestionType,listing_id:(0,v.isPDPResult)(t)?t.pdpDetails.listing_id:void 0,id:null==t?void 0:t.key,type:null==t?void 0:t.searchType,title:(0,c.default)(t,'sectionTitle'),max_num_rows:String((0,c.default)(t,'sectionMaxNumRows')),item_offset_within_section:(0,c.default)(t,'itemOffsetWithinSection'),sub_title:(null==h?void 0:h.subtitle)||(null==f?void 0:f.description)}}function C({isClick:s=!1,isKeyboardSubmission:o=!1,input:u,clickedDisplayString:p,clickedRefinementFilter:f,clickedRefinementId:v,clickedRefinementPath:y,clickedSuggestionType:k,clickedVertical:b,responseMetadata:x,results:C=[],suggestionClicked:R,market:A,region:q,countryCode:L,locale:w=t.default.locale(),language:D=t.default.language(),exploreSearchContext:E,sessionId:H,sectionTypesList:M,sectionTitlesList:B,maxNumRowsList:V,mapBounds:K,isPoiAutocomplete:N}){const O=x||(0,c.default)((0,_.default)(C),'responseMetadata'),F=(0,c.default)(O,'cacheInfo')||{},J=(0,c.default)(O,'requestId'),Q=(0,c.default)(O,'latencyMS'),W=(0,c.default)(O,'apiVersion'),{maxAge:Y,cacheProvider:j,cacheServedBy:z,cdnCacheHits:G}=F,U=C.map(T),X=C.map(t=>t.name),Z=C.map(t=>t.suggestionType).filter(h.default),$=C.map(t=>t.verticalType).filter(h.default),ee=S((0,c.default)(R,'position')),te=C.map(t=>{var s,n;return P(null===(s=t.searchParams)||void 0===s||null===(n=s.refinement_paths)||void 0===n?void 0:n[0])}),ie={operation:s?2:1,is_clicked_event_on_enter_operation:o,user_input:u,index_of_suggestion_item_clicked:ee,autocomplete_refinement_filters:I(C,'filters'),autocomplete_refinement_ids:I(C,'id'),autocomplete_refinement_paths:te,autocomplete_suggestion_display_strings:X,autocomplete_suggestion_types:Z,autocomplete_vertical_refinement_types:$,autocomplete_suggestions:U,autocomplete_suggestion_clicked:R,autocomplete_suggestion_clicked_display_string:p,autocomplete_suggestion_clicked_refinement_filter:f,autocomplete_suggestion_clicked_refinement_id:P(v),autocomplete_suggestion_clicked_refinement_path:y,autocomplete_suggestion_clicked_type:k,autocomplete_suggestion_clicked_vertical:b,user_market:A,latency_ms:Q,cdn_cache_max_age:Y,cdn_cache_provider:j,cdn_cache_served_by:z,cdn_cache_hits:G,satori_region_id:q,user_country_code:L,autocomplete_request_id:J,satori_api_version:W,user_locale:w,user_language:D,search_context:E,satori_session_id:H,section_types_list:M,section_titles_list:B,max_num_rows_list:V,ne_lat:null==K?void 0:K.ne.lat,ne_lng:null==K?void 0:K.ne.lng,sw_lat:null==K?void 0:K.sw.lat,sw_lng:null==K?void 0:K.sw.lng,is_poi_autocomplete:N};l.default.queueJitneyEvent({schema:n().SearchLocationAutocompleteImpressionEvent,event_data:ie}),s&&l.default.getLogger().flushEventQueue()}function R(t){return'/for_you'!==((0,c.default)(t,'searchParams.refinement_paths')||[])[0]?t:{...t,searchParams:{...t.searchParams,refinement_paths:[]}}}e.SatoriLogger=class{constructor(){this.keystrokes=void 0,this.requestId=void 0,this.sessionId=void 0,this.keystrokes=[],this.sessionId=null}initialize(){this.keystrokes=[]}startSession(){this.sessionId=(0,s().v4)()}endSession(){this.sessionId=null,l.default.getLogger().flushEventQueue()}hasKeystrokes(){return this.keystrokes.length>0}logAutocompleteImpression({input:t,responseMetadata:s,results:n,market:o,region:l,countryCode:u,exploreSearchContext:c,sectionTypesList:_,sectionTitlesList:p,maxNumRowsList:f,mapBounds:v,isPoiAutocomplete:h}){const y=(n||[]).map(R),k=(function({results:t=[],input:s="",position:n=-1,latency:o=-1}){return{location_input:s,autocomplete_suggestions:t.map(b),position_of_eventually_clicked_suggestion:n,latency_ms:o}})({results:y,input:t});this.keystrokes=[...this.keystrokes,k],this.requestId=s.requestId,C({market:o,region:l,responseMetadata:s,countryCode:u,exploreSearchContext:c,results:y,input:t,sectionTypesList:_,sectionTitlesList:p,maxNumRowsList:f,mapBounds:v,isPoiAutocomplete:h,...this.sessionId?{sessionId:this.sessionId}:{}})}logAutocompleteSelected({isKeyboardSubmission:t=!1,results:s,selectedItem:n,activeIndex:p,input:v,market:h,region:y,countryCode:k,exploreSearchContext:b,mapBounds:P,isPoiAutocomplete:I}){var A,q;const L=(s||[]).map(R),w=(D=n)?R(D):void 0;var D;let E;if(w){const t=null!=p?p:L.findIndex(t=>(0,u.default)(t.searchParams,w.searchParams));E=T(w,t)}const H=(0,_.default)(this.keystrokes),M=S((0,c.default)(E,'position'));H&&(H.position_of_eventually_clicked_suggestion=M,(function({isClick:t=!1,keystrokes:s=[],market:n}){const u={schema:o().SearchLocationAutocompleteAllKeystrokesEvent,event_data:{operation:t?2:1,user_market:n,autocomplete_keystrokes:s}};l.default.logJitneyEvent(u)})({market:h,isClick:!0,keystrokes:this.keystrokes})),t&&(0,f.logSearchBarKeyboardSubmission)({positionClicked:M,requestId:this.requestId,searchContext:b}),C({isClick:!0,isKeyboardSubmission:t,clickedDisplayString:(0,c.default)(w,'name'),clickedRefinementFilter:x(w,'filters'),clickedRefinementId:null==w||null===(A=w.refinements)||void 0===A||null===(q=A[0])||void 0===q?void 0:q.id,clickedRefinementPath:x(w,'path'),clickedSuggestionType:(0,c.default)(w,'suggestionType'),clickedVertical:x(w,'vertical'),suggestionClicked:E,market:h,region:y,countryCode:k,exploreSearchContext:b,results:L,input:v,mapBounds:P,isPoiAutocomplete:I,...this.sessionId?{sessionId:this.sessionId}:{}})}}}),62062669,[4915317,4653096,62062670,62062671,4653111,5963856,5439540,62062672,10551298,61407335,10551320,5046282]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchLocationAutocompleteImpressionEvent=void 0;var o={defaultProps:{schema:'com.airbnb.jitney.event.logging.Search:SearchLocationAutocompleteImpressionEvent:8.0.0',event_name:'search_location_autocomplete_impression'},propTypes:{}};e.SearchLocationAutocompleteImpressionEvent=o,o.fullyQualifiedName='Search.v8.SearchLocationAutocompleteImpressionEvent'}),62062670,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchLocationAutocompleteAllKeystrokesEvent=void 0;e.SearchLocationAutocompleteAllKeystrokesEvent={defaultProps:{schema:'com.airbnb.jitney.event.logging.Search:SearchLocationAutocompleteAllKeystrokesEvent:2.0.0',event_name:'search_location_autocomplete_all_keystrokes'},propTypes:{}}}),62062671,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return t[t.length-1];return}}),62062672,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(null==g.document)return;document.activeElement&&document.activeElement.blur();document.documentElement&&document.documentElement.focus()}}),62062673,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),s=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),o=r(d[3]),u=r(d[4]),_=r(d[5]),l=babelHelpers.interopRequireDefault(r(d[6])),N=babelHelpers.interopRequireDefault(r(d[7])),T=babelHelpers.interopRequireDefault(r(d[8])),E=r(d[9]),O=r(d[10]);function p(t){switch(t){case'LOCATIONS_NEARBY':return O.VALID_AUTOCOMPLETE_SECTIONS.LOCATIONS_NEARBY;case'POIS_IN_LOCATION':return O.VALID_AUTOCOMPLETE_SECTIONS.POIS_IN_LOCATION;case'REFINEMENT_PILLS':return O.VALID_AUTOCOMPLETE_SECTIONS.REFINEMENT_SECTIONS;case'RECENT_SEARCHES':return O.VALID_AUTOCOMPLETE_SECTIONS.RECENT_SEARCHES;case'THINGS_TO_DO_NEARBY':return O.VALID_AUTOCOMPLETE_SECTIONS.THINGS_TO_DO_NEARBY;case'THINGS_TO_DO_IN_LOCATION':return O.VALID_AUTOCOMPLETE_SECTIONS.THINGS_TO_DO_IN_LOCATION;case'TRENDING_LOCATIONS_NEARBY':return O.VALID_AUTOCOMPLETE_SECTIONS.TRENDING_LOCATIONS_NEARBY;case'NEAR_ME':return O.VALID_AUTOCOMPLETE_SECTIONS.NEAR_ME;default:return null}}function c(t){const{items:s,max_num_rows:n,type:o,title:_}=t,N=(s||[]).map(({display_name:t,explore_search_params:s,id:N,sub_title:T,suggestion_type:E,image_url:O,video_url:p,metadata:c},h)=>{const I=null!=t?t:null==s?void 0:s.query,{params:A,...S}=s||{},y={...S,...(0,l.default)(A)};return{key:N||'',name:I,description:T||'',itemOffsetWithinSection:h,prefix:(null==c?void 0:c.airmoji)||'description_clock',searchParams:y,sectionTitle:_||'',sectionMaxNumRows:n||Number.MAX_SAFE_INTEGER,source:u.AUTOSUGGEST_TYPE,suggestionType:o||'',searchType:E||o||'',title:I,imageUrl:null!=O?O:void 0,videoUrl:null!=p?p:void 0}});return'RECENT_SEARCHES'===o&&N.length>5?N.slice(0,5):N}e.default=class{constructor(){this.autosuggestions=void 0,this.experimentName=void 0,this.experimentTreatment=void 0,this.showNearby=void 0,this.refinementPaths=void 0,this.autosuggestions=null,this.experimentName=void 0,this.experimentTreatment=void 0,this.showNearby=!1}init({refinementPaths:u,autosuggestOptions:l=[]}={}){this.refinementPaths=u;const N=(0,_.getLatLng)(),O={refinement_paths:u,options:null==l?void 0:l.join('|'),gps_lat:null==N?void 0:N.lat,gps_lng:null==N?void 0:N.lng};return Promise.resolve(fetch("/api/v2/autosuggestions?"+n.default.stringify({...O,key:t.default.key(),locale:s.default.locale(),currency:T.default.current().curr},{arrayFormat:'brackets'}))).then(t=>t.json()).catch(()=>({autosuggestions:[],show_nearby:!1})).then(t=>{if(!t||!Array.isArray(t.autosuggestions))throw new Error('Invalid autosuggestions response');const{autosuggestions:s,show_nearby:n,experiment_data:o}=t;if(o&&(this.experimentName=o.name,this.experimentTreatment=o.treatment_name,!(0,E.isInExperimentTreatment)(this.experimentName,this.experimentTreatment))){return{autosuggestions:(s||[]).filter(t=>'THINGS_TO_DO_NEARBY'!==t.type&&'THINGS_TO_DO_IN_LOCATION'!==t.type),showNearby:n}}return{autosuggestions:s,showNearby:n}}).catch(t=>((0,o.warn)(t),{autosuggestions:[],showNearby:!1})).then(({autosuggestions:t,showNearby:s})=>{this.autosuggestions=t,this.showNearby=!!s})}setAutosuggestions(){}sections(t){const s=null==(n=this.autosuggestions)?[]:n.map(t=>({id:p(t.type)||t.type||'',title:t.title,results:c(t),type:t.type,maxNumRows:t.max_num_rows||void 0,displayType:t.display_type||void 0}));var n;return s.length?t?t(s):s:[]}nearbySection(){if(N.default.getBootstrap('tp_autosuggest_nearby_testing')||this.showNearby&&navigator.geolocation)return(0,O.nearbySection)()}getExperimentName(){return this.experimentName}getTreatmentName(){return this.experimentTreatment}}}),62062674,[4915213,4915317,4653117,4915323,10551298,10551308,10551328,4915312,4915310,62062675,10551317]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseAutosuggest=function(){return'zh'!==t.default.language()},e.logAutosuggestExperiment=function(t,n){if(!t||!n)return!1;return u.default.logCustomHashing(t,n)},e.isInExperimentTreatment=function(t,u){if(!t||!u)return!1;return'treatment'===u};var t=babelHelpers.interopRequireDefault(r(d[0])),u=babelHelpers.interopRequireDefault(r(d[1]))}),62062675,[4915317,4915316]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;babelHelpers.interopRequireDefault(r(d[0]));var t=r(d[1]),l=r(d[2]);var o=(0,t.withStyles)(({dls19:t})=>({text:{...t.typography.base.md,color:t.palette.foggy,marginTop:8,marginBottom:16}}))((function({children:t,css:o,styles:s}){return(0,l.jsx)("div",{...o(s.text),children:t})}));e.default=o}),62062676,[196613,5046337,5046332]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3]));function s({id:s,onClear:l,onBlur:f,onFocus:v,onSelect:y,onSubmit:b,onActiveOption:x,suggestionCount:I,forceOpen:D=!1}){const[k,O]=(0,t.useReducer)(p,D,c),{activeIndex:C,isOpen:_,isFocused:E}=k,w=(0,t.useRef)(null),F=(0,t.useRef)(null),R=(0,u.default)(C);(0,t.useEffect)(()=>{'keyboard'===F.current&&R!==C&&(null==x||x(C))},[C,R,x]);const h=s+"-listbox";function P(t,n){null==y||y(t,n),F.current=n?'keyboard':'mouse',O({type:'leave',payload:D})}function U(t){t.preventDefault(),F.current='keyboard',-1===C||0===I?null==b||b():P(C,!0)}function q(t){'Enter'===t.key&&U(t)}const A=t=>`${s}-suggestion-${t}`;function L(t){F.current='mouse',O({type:'activeIndex',payload:t})}function H(t){O({type:'open'}),null==v||v(t)}function K(){null==f||f(),O({type:'leave',payload:D})}(0,t.useEffect)(()=>{null!=w&&w.current&&document.activeElement===w.current&&H()},[]);const[M]=(0,o.default)(!D&&_,K);return{activeOptionIndex:C,getSuggestionProps:function(t){return{role:'option',isActive:C===t,onClick:()=>P(t,!1),onFocus:()=>L(t),onKeyUp:q,onMouseEnter:()=>L(t),tabIndex:-1,id:A(t),'data-index':t,'data-testid':"option-"+t}},isListboxOpen:_,isInputFocused:E,inputRef:w,onClearPress:function(t){t.preventDefault(),F.current='mouse',O({type:'clear'}),null==l||l();const n=setTimeout(()=>{var t;null==w||null===(t=w.current)||void 0===t||t.focus()});return()=>clearTimeout(n)},outsideRef:M,onBlur:K,descriptionId:s+"-description",inputProps:{'aria-activedescendant':C>=0?A(C):void 0,'aria-autocomplete':'both','aria-expanded':_,'aria-controls':_?h:void 0,autoComplete:'off',autoCorrect:'off',spellCheck:!1,id:s+"-input",name:'query',onFocus:H,onKeyDown:function(t){'Enter'===t.key&&t.preventDefault()},onKeyUp:function(t){switch(t.key){case'ArrowDown':return t.preventDefault(),F.current='keyboard',void O({type:'moveDown',payload:{suggestionCount:I}});case'ArrowUp':return t.preventDefault(),F.current='keyboard',void O({type:'moveUp',payload:{suggestionCount:I}});case'Enter':return U(t);case'Escape':return t.preventDefault(),F.current='keyboard',null==l||l(),void O({type:'close',payload:D});default:/[\x20-\x7E]/.test(t.key)&&O({type:'open'})}},role:'combobox',ref:w},statusProps:{'aria-atomic':!0,'aria-live':'polite',role:'status'},listboxProps:{role:'listbox','aria-label':n.default.t('search.voiceover.VoiceOver_description_for_list_of_search_suggestions'),id:h,onMouseLeave:function(){F.current='mouse',O({type:'leaveListbox'})},tabIndex:-1},formProps:{role:'search'}}}function c(t){return{isOpen:t,activeIndex:-1,isFocused:!1}}function l(t,n,o){const u=o-1;let s=n+t;return s<-1&&(s=u),s>u&&(s=-1),s}function p(t,n){const{isOpen:o,activeIndex:u}=t;switch(n.type){case'leave':return c(n.payload);case'moveUp':{const{suggestionCount:s}=n.payload;if(s<=0||!o)return t;const c=l(-1,u,s);return{...t,activeIndex:c}}case'moveDown':{const{suggestionCount:s}=n.payload;if(s<=0)return t;if(!o)return{...t,isOpen:!0,activeIndex:0};const c=l(1,u,s);return{...t,activeIndex:c}}case'clear':return{...t,activeIndex:-1};case'open':return{...t,isFocused:!0,isOpen:!0};case'close':return{...t,isOpen:n.payload,activeIndex:-1};case'activeIndex':return{...t,activeIndex:n.payload};case'leaveListbox':return{...t,isFocused:!1,activeIndex:-1};default:return t}}}),62062677,[196613,4653057,62062678,61800471]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,o){const c=(0,t.useRef)(null),s=(0,n.default)(o);return(0,t.useEffect)(()=>{if(!u)return;const t=t=>{var n;!(null===(n=c.current)||void 0===n||!n.contains(t.target))||s()};return document.addEventListener('focus',t,!0),()=>{document.removeEventListener('focus',t,!0)}},[u]),[c]};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1]))}),62062678,[196613,7274586]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({autocompleteVertical:x,onBlur:D,onInputClear:v,onUpdateSearchType:R,onSelect:I,onSubmit:F,onFocus:H,refinementPath:q,responseFilters:y,searchContext:B,shouldLog:E=!0}){const A=(0,t.useRef)(new c.SatoriLogger),L=(0,h.default)(B),[M,_]=(0,t.useState)(null),O=(0,t.useCallback)(()=>_(null),[]),[,P]=(0,t.useState)(),[U,k]=(0,t.useState)(null),K=(0,p.createSatoriOptions)(l.default.getData(),x,q),T=(0,s.default)(M,K,q),V=(null==T?void 0:T.sections)||[],j=V.flatMap(t=>t.results),w=null==T?void 0:T.logMetadata;(0,t.useEffect)(()=>{let t=!0;return l.default.sync().then(({versionChanged:l})=>{l&&t&&P({})}),()=>{t=!1}},[]);const z=(0,h.default)(R),Q=(0,t.useCallback)((function(t){var l;k(null),null===(l=z.current)||void 0===l||l.call(z,f.SearchType.SEARCH_QUERY),_(t)}),[]);const Y=(0,b.default)(t=>{const l=-1===t?null:j[t];k(l?(0,S.default)(l):null)});(0,t.useEffect)(()=>{M||A.current.initialize()},[M]),(0,t.useEffect)(()=>{null!=w&&E&&A.current.logAutocompleteImpression({...w,exploreSearchContext:L.current,responseMetadata:{},...l.default.getLoggingData()})},[null==T?void 0:T.userInput,E]);const G=null!=U?U:null!=M?M:null,J=j.length;return{allSuggestions:j,inputValue:G,clearUserInput:O,onActiveOption:Y,onClear:function(){_(''),k(null),null==v||v(),(0,n.logSearchBarReset)({searchContext:B,searchFilters:y})},onBlur:function(){A.current.endSession(),null==D||D(),k(null),L.current&&(0,n.logSearchBarDismissed)(L.current)},onFocus:function(t){M||A.current.startSession(),(0,C.logFlexDestExperiment)(),null==H||H(t),L.current&&((0,n.logSearchBarPressed)(L.current),(0,u.logSearchBarFocus)({searchContext:L.current,stagedFilters:y}))},onInputChange:Q,onSelect:function(t,n){const u=j[t];O(),null!=w&&null!=u&&(A.current.logAutocompleteSelected({isKeyboardSubmission:n,results:V.flatMap(t=>t.results),selectedItem:u,activeIndex:t,input:M||'',exploreSearchContext:B,...l.default.getLoggingData()}),null==I||I(u))},onSubmit:function(){M&&(A.current.logAutocompleteSelected({isKeyboardSubmission:!0,results:[],activeIndex:-1,input:M||'',exploreSearchContext:L.current,...l.default.getLoggingData()}),(0,o.default)(),null==F||F(M))},sections:V,suggestionCount:J,userInput:M}};var t=r(d[0]),l=babelHelpers.interopRequireDefault(r(d[1])),n=r(d[2]),u=r(d[3]),o=babelHelpers.interopRequireDefault(r(d[4])),s=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]),p=r(d[7]),f=r(d[8]),S=babelHelpers.interopRequireDefault(r(d[9])),b=babelHelpers.interopRequireDefault(r(d[10])),h=babelHelpers.interopRequireDefault(r(d[11])),C=r(d[12])}),62062679,[196613,10551319,61407335,62062680,62062673,62062683,62062669,62062685,10551299,62062687,7274586,7274587,62062649]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.logSearchBarFocus=function(n){return u(t().ExploreClickSearchLocationEvent,n)},e.logSelectLocation=function(t){return u(n().ExploreSelectSearchLocationEvent,t)};var o=babelHelpers.interopRequireDefault(r(d[2])),c=babelHelpers.interopRequireDefault(r(d[3]));function u(t,{stagedFilters:n,currentTab:u,searchContext:l}){const{location:s,checkin:f,checkout:b,guests:h}=n||{};o.default.logJitneyEvent({schema:t,event_data:{location:s||'',dates:[f||'',b||''],guests:void 0!==h?h:-1,subtab:(0,c.default)(u),search_context:l}})}}),62062680,[62062681,62062682,4653111,61407342]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExploreClickSearchLocationEvent=void 0;var o={defaultProps:{schema:'com.airbnb.jitney.event.logging.Explore:ExploreClickSearchLocationEvent:2.0.0',event_name:'explore_click_search_location',page:'explore',target:'search_location',operation:2},propTypes:{}};e.ExploreClickSearchLocationEvent=o,o.fullyQualifiedName='Explore.v2.ExploreClickSearchLocationEvent'}),62062681,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExploreSelectSearchLocationEvent=void 0;var o={defaultProps:{schema:'com.airbnb.jitney.event.logging.Explore:ExploreSelectSearchLocationEvent:2.0.0',event_name:'explore_select_search_location',page:'explore',target:'search_location',operation:4},propTypes:{}};e.ExploreSelectSearchLocationEvent=o,o.fullyQualifiedName='Explore.v2.ExploreSelectSearchLocationEvent'}),62062682,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l,n,p){const o=(0,t.default)(p),f=(0,s.default)(l||'',n);if(!l)return null==o?null:{userInput:'',sections:o,logMetadata:{input:'',results:o.flatMap(t=>t.results),sectionTypesList:o.map(t=>t.type).filter(u.default),sectionTitlesList:o.map(t=>t.title).filter(u.default),maxNumRowsList:o.map(t=>t.maxNumRows).filter(u.default)}};return{userInput:f.userInput,sections:f.sections,logMetadata:{input:f.userInput,results:f.sections[0].results,responseMetadata:f.metadata}}};var t=babelHelpers.interopRequireDefault(r(d[0])),s=babelHelpers.interopRequireDefault(r(d[1])),u=babelHelpers.interopRequireDefault(r(d[2]))}),62062683,[62062684,62062685,5046282]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l,o=['simple_search',(0,s.getFlexDestTreatmentFlagForAutosuggest)()]){const f=(0,t.useRef)(new n.default),[c,p]=(0,t.useState)(null),b=(0,t.useRef)(new Map),_=[l,o.toString()].filter(Boolean).join('|');return(0,t.useEffect)(()=>{let t=!1;const n=b.current.get(_);if(!(null!=n&&n.expires-(0,u.default)().now()>=0)||t)return f.current.init({autosuggestOptions:o,...l&&{refinementPaths:[l]}}).then(()=>f.current.sections()).then(n=>{t||(null!=n&&b.current.set(_,{expires:(0,u.default)().now()+3e4,sections:n}),p(n))}),()=>{t=!0};p(n.sections)},[_]),c};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1])),u=babelHelpers.interopRequireDefault(r(d[2])),s=r(d[3])}),62062684,[196613,62062674,4915231,62062649]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l,c){const[p,b]=(0,t.useState)(f),R=(0,n.default)(),F=(0,o.default)(c);const{enqueue:h,clearQueue:y}=(0,s.default)(200,(function(t){null!=t&&R.current&&b(t)}));return(0,t.useEffect)(()=>{if(!l)return b(f),void y();h(()=>(0,u.satoriQuery)(l,F.current).then(({results:t,metadata:u})=>({sections:[{id:'predictions',type:'predictions',results:t}],metadata:u,userInput:l})))},[l,F,h,y]),p},e.createSatoriOptions=function(t,u,s){return{userMarket:t,maxResults:6,currentTab:(0,l.getTabFromRefinementPath)(s),shouldFilterByVerticalRefinement:!0,hideNavResults:!0,isSimpleSearch:!0,autocompleteVertical:u,excludeListingNames:!1,flexDestTreatmentFlag:(0,c.getFlexDestTreatmentFlagForAutosuggest)()}};var t=r(d[0]),u=r(d[1]),s=babelHelpers.interopRequireDefault(r(d[2])),n=babelHelpers.interopRequireDefault(r(d[3])),l=r(d[4]),o=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]);const f=Object.freeze({sections:[{id:'predictions',type:'predictions',results:[]}],metadata:null,userInput:''})}),62062685,[196613,10551318,62062686,7929867,10551336,7274587,62062649]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(d[0]),l=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),t=babelHelpers.interopRequireDefault(r(d[3]));var c=function(c,o,s){const f=(0,t.default)(o),b=(0,t.default)(s),p=(0,u.useRef)(null),v=(0,u.useRef)(0),R=(0,u.useRef)(null),k=(0,u.useCallback)(()=>{R.current&&R.current(),R.current=null},[]),q=(0,u.useCallback)((function(u,l,n){return p.current=u,new Promise(u=>u(l())).then(l=>{u>v.current?(v.current=u,f.current(l),null==n||n('resolved')):null==n||n('discarded')},u=>{var l;null==n||n('rejected'),null==b||null===(l=b.current)||void 0===l||l.call(b,u)})}),[b,f]),C=(0,u.useCallback)((function(u,l,n){let t=!1;const o=setTimeout(()=>{t=!0,q(u,l,n)},c);return()=>{t||(null==n||n('cancelled'),clearTimeout(o))}}),[c,q]),_=(0,u.useCallback)((function(u,n){const t=(0,l.default)().now();k(),null!=p.current?t-p.current>c?q(t,u,n):R.current=C(t,u,n):q(t,u,n)}),[k,C,c,q]);return(0,n.default)(()=>{k()}),{enqueue:_,clearQueue:k}};e.default=c}),62062686,[196613,4915231,62062668,7274587]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u){var n,l,o;if('NON_INTERACTIVE_MESSAGE'===u.suggestionType)return'';return null!==(n=null!==(l=null==u?void 0:u.name)&&void 0!==l?l:null==u||null===(o=u.searchParams)||void 0===o?void 0:o.query)&&void 0!==n?n:''}}),62062687,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(p,E,w=u,y,F,f,O="default"){const{searchParams:C,searchType:N,suggestionType:U}=p;(0,n.isNonSearchResult)(p)&&(0,n.default)(p);if(N===t.SearchType.RECENT_SEARCH)return(0,c.logSearchBarRecentSearch)({searchContext:f,searchFilters:F,nextSearchFilters:(0,T.constructNextSearchFiltersFromSearchParams)(C,F)}),void(0,o.pushToSearchHistory)({stagedFilters:(0,T.constructNextSearchFiltersFromSearchParams)(C,F),responseFilters:F,searchType:t.SearchType.AUTOSUGGEST,shouldReloadInSameWindow:'reload-in-same-window'===O,openInNewWindow:'open-in-new-window'===O});if(N===t.SearchType.GEOLOCATION||N===t.SearchType.NEAR_ME)return(0,l.getSearchParamsWithUserMarket)().then(o=>{const n=(0,s.default)({...C,...o});w(t.SearchType.AUTOSUGGEST),E(n,t=>{(0,S.logSelectLocation)({searchContext:f,newStagedFilters:t}),(0,c.logSearchBarNearbyClick)({searchContext:f,searchFilters:F,nextSearchFilters:t})}),y()}).then(()=>(0,l.default)()).then(t=>{const o=(0,s.default)({...C,...t});E(o)});if(N===t.SearchType.AUTOSUGGEST){if(U===h.PREDICTIONS_SUGGESTION_TYPES.FLEXIBLE_DESTINATIONS)return void(0,o.pushToSearchHistory)({stagedFilters:(0,T.constructNextSearchFiltersFromSearchParams)(C,F),responseFilters:F,searchType:t.SearchType.AUTOSUGGEST,shouldReloadInSameWindow:'reload-in-same-window'===O,openInNewWindow:'open-in-new-window'===O});const n=(0,s.default)(C);w(t.SearchType.AUTOSUGGEST),E(n,t=>{(0,S.logSelectLocation)({searchContext:f,newStagedFilters:t})}),y()}if(N===t.SearchType.AUTOCOMPLETE){const o=(0,s.default)(C);w(t.SearchType.AUTOCOMPLETE_CLICK),E(o,t=>{var o;((0,S.logSelectLocation)({searchContext:f,newStagedFilters:t}),f)&&(0,c.logAutocompletePressed)(f,F,t,null===(o=p.responseMetadata)||void 0===o?void 0:o.requestId)}),y()}};var t=r(d[0]),o=r(d[1]),s=babelHelpers.interopRequireDefault(r(d[2])),n=babelHelpers.interopRequireWildcard(r(d[3])),c=r(d[4]),l=babelHelpers.interopRequireWildcard(r(d[5])),S=r(d[6]),h=r(d[7]),T=r(d[8]);const u=t=>{}}),62062688,[10551299,10551336,62062689,10551320,61407335,62062690,62062680,10551316,10551324]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u={}){return[...new Set([...n,...l.DORA_FILTER_KEYS.filter(l=>{var n;return null!==(null!==(n=u[l])&&void 0!==n?n:null)})])].map(l=>({key:l,selected:!!u[l],value:u[l]||null,valueType:t.includes(l)?'number':'string'}))};var l=r(d[0]);const n=['lat','lng','location','location_search','neighborhood_ids','place_id','query',...r(d[1]).MAP_FILTER_KEYS],t=['lat','lng']}),62062689,[10551374,10551324]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSearchParamsWithUserMarket=o,e.default=function(){if(navigator.geolocation)return new Promise(t=>{navigator.geolocation.getCurrentPosition(({coords:{latitude:o,longitude:u,accuracy:c}})=>{(0,n.setLatLng)({lat:o,lng:u,accuracy:c}),t({lat:o,lng:u})},()=>t(o()),{timeout:5e3})});return o()};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);function o(){return t.default.sync().then(()=>({location:t.default.getMarket()}))}}),62062690,[10551319,10551308]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{key:'query',value:t,valueType:'string',selected:!0}}}),62062691,[]);
__r(4653057).extend({"search.voiceover.VoiceOver_description_for_list_of_search_suggestions":"Search suggestions"});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/5c5b.26c1e5d927.js.map