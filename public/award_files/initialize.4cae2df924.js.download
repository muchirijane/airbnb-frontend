__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInitializeOptions=async function(){if(!navigator||!navigator.serviceWorker)throw new Error('Push notifications requires a service worker to be available.');const o=await navigator.serviceWorker.ready;if(!o||!o.active)throw new Error('No service worker was activated, push notifications are not available.');if(await Promise.race([w,p.scheduler.wait({delay:3e4})]),!v)throw new Error('Niobe client is required, did you call "initialize"?');const{tracking_context:n}=t.default.get('layout-init'),{controller:s}=n,c='homes-host-loop'===s?'GLOBAL_HOST':'GLOBAL_TRAVEL',u=o.active.scriptURL.split('/'),h="/"+u[u.length-1],b=(0,l.makeDatadogTags)("registered_path:"+h);return{datadogTags:f?[f,b].join(','):b,appType:c,niobeClient:v,pushNotificationsKey:t.default.get('pushNotificationsKey'),serviceWorkerRegistration:o}},e.default=function({datadogTags:t,niobeClient:l}){'undefined'!=typeof Notification&&'denied'===Notification.permission&&(0,o.airdogCount)('service_worker.push_permission_denied',1,t);if(!(0,s.hasPermission)())return;f=t,v=l,h();try{if(!n.default.isLoggedIn())return void(0,c.clearSubscription)();(0,c.updateSubscriptionIfOptedIn)()}catch(t){(0,u.reportError)(t)}};var t=babelHelpers.interopRequireDefault(r(d[0])),o=r(d[1]),n=babelHelpers.interopRequireDefault(r(d[2])),s=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6]),p=r(d[7]);let f,v,h;const w=new Promise(t=>{h=t})}),167116800,[4653076,4915321,4915310,99287050,99287046,99287051,5898348,4653141]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/push-notifications/initialize.e39d37b8e6.js.map