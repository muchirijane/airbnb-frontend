__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Promise((n,c)=>{const o=document.createElement('script');o.type='text/javascript',o.async=!0,o.onload=n,o.onerror=c,o.src=t,(document.head||document.getElementsByTagName('head')[0]).appendChild(o)})}}),5046277,[]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.emitRecaptchaClientGeneratedTokenEvent=function({action:o,success:c,loadTime:l,readyTime:s,execTime:u,length:f,error:v,isPlatformized:_}){const p={action:o,success:c,load_time:l,ready_time:s,execution_time:u,error:v,...void 0===f?{}:{length:f},...void 0===_?{}:{is_platformized:_},provider:'Google'};n.default.logJitneyEvent({schema:t().RecaptchaClientGeneratedTokenEvent,event_data:p})};var n=babelHelpers.interopRequireDefault(r(d[1]))}),5046278,[5046279,4653111]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RecaptchaClientGeneratedTokenEvent=void 0;var t={defaultProps:{schema:'com.airbnb.jitney.event.logging.Recaptcha:RecaptchaClientGeneratedTokenEvent:3.0.0',event_name:'recaptcha_client_generated_token'},propTypes:{}};e.RecaptchaClientGeneratedTokenEvent=t,t.fullyQualifiedName='Recaptcha.v3.RecaptchaClientGeneratedTokenEvent'}),5046279,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RECAPTCHA_TOKEN_VALUE_PREFIX=e.RECAPTCHA_TOKEN_HEADER_NAME=e.GRECAPTCHA_SITE_KEY=void 0;e.GRECAPTCHA_SITE_KEY='6LcZIM8aAAAAAF-MVKDG5e_696lgsoUeqKoXlxsR';e.RECAPTCHA_TOKEN_HEADER_NAME='X-AIRBNB-RECAPTCHA-TOKEN';e.RECAPTCHA_TOKEN_VALUE_PREFIX='WEB-V3:'}),5046280,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldEnableBotDetectionPlatform=function(){return!!o.default.getBootstrap('google_recaptcha_v3_web_force_in_platform')||!!o.default.getBootstrap('google_recaptcha_v3_web_platform')},e.deliverNiobeBotDetection=function(){const l=(0,n.getTreatmentOverride)('niobe_bot_platform_force_in');if((0,_.default)(l))return l;if(o.default.getBootstrap('web_niobe_bot_detection_kill_switch'))return!1;return!(!o.default.getBootstrap('web_niobe_bot_detection_enable')||!t.default.deliverExperiment('web_niobe_bot_detection_platformization',{control:()=>!1,treatment:()=>!0,treatment_unknown:()=>!1}))},e.deliverRecaptchaNetDomainSwitch=function(){return!(!o.default.getBootstrap('erf-web_bot_detection_use_recaptcha_net_globally-trebuchet')||!t.default.deliverExperiment('web_bot_detection_use_recaptcha_net_globally',{control:()=>!1,treatment:()=>!0,treatment_unknown:()=>!1}))};var t=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),n=r(d[2]),_=babelHelpers.interopRequireDefault(r(d[3]))}),5046281,[4915316,4915312,4915322,5046282]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return null!=t}}),5046282,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RecaptchaTokenError=void 0;class o extends Error{}e.RecaptchaTokenError=o}),5046283,[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadGrecaptcha=function(){const c='CN'===t.default.country(),h=(0,u.deliverRecaptchaNetDomainSwitch)(),f=c||h?'www.recaptcha.net':'www.google.com',p=n.default.getBootstrap('google_recaptcha_v3_web_logging')?'&logging=true':'';(0,o.default)(`https://${f}/recaptcha/api.js?render=${s.GRECAPTCHA_SITE_KEY}${p}`).then(l)},e.getRecaptchaV3TokenHeader=function t({action:n,timeoutInMs:o=1e4,shouldThrow:c=!1,maxRetries:u=0,isPlatformized:h}){return(function(t,n,o){const c=Date.now(),s={startTs:c,action:t,isPlatformized:o};return Promise.race([T(s),f(b(c,n)).then(p('completeGrecaptchaLoad',n))]).then(()=>Promise.race([w(s),f(b(c,n)).then(p('prepareGrecaptcha',n))])).then(()=>Promise.race([E(s),f(b(c,n)).then(p('generateToken',n))])).then(()=>(P(s),""+s.token)).catch(t=>{throw P({...s,err:String(t)}),t})})(n,o,h).then(t=>({[s.RECAPTCHA_TOKEN_HEADER_NAME]:s.RECAPTCHA_TOKEN_VALUE_PREFIX+t})).catch(l=>{if(0===u){if(c)throw l;return Promise.resolve({[s.RECAPTCHA_TOKEN_HEADER_NAME]:''})}return t({action:n,timeoutInMs:1.5*o,shouldThrow:c,maxRetries:u-1,isPlatformized:h})})};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),c=r(d[3]),s=r(d[4]),u=r(d[5]),h=r(d[6]);function l(){const t=`.grecaptcha-badge { visibility: hidden; ${document.body.classList.contains('hide-recaptcha-from-voice-over')?'z-index: -10;':''} }`,n=document.head||document.getElementsByTagName('head')[0],o=document.createElement('style');o.type='text/css',n.appendChild(o);const c=o.sheet?o.sheet:null;c&&c.insertRule?c.insertRule(t,0):o.innerText=(o.innerText||'')+t}function f(t){return new Promise(n=>setTimeout(n,t))}function p(t,n){return()=>{throw new h.RecaptchaTokenError(`Timeout: ${t} exceeded ${n}ms`)}}function T(t){if(void 0===window.grecaptcha){return f(50).then(()=>T(t))}return t.loadedTs=Date.now(),Promise.resolve()}function w(t){return new Promise(n=>{window.grecaptcha.ready(()=>{t.readyTs=Date.now(),n()})})}function E(t){const{action:n}=t;return window.grecaptcha.execute(s.GRECAPTCHA_SITE_KEY,{action:n}).then(n=>{if('string'!=typeof n||!n.length)throw new h.RecaptchaTokenError('window.grecaptcha failed to generate token');t.executedTs=Date.now(),t.token=n})}function _(t){const{startTs:n,loadedTs:o}=t;return'number'==typeof o?o-n:-1}function R(t){const{loadedTs:n,readyTs:o}=t;return'number'!=typeof n?-1:'number'==typeof o?o-n:-1}function y(t){const{readyTs:n,executedTs:o}=t;return'number'!=typeof n?-1:'number'==typeof o?o-n:-1}function P(t){const{action:n,err:o,token:s,isPlatformized:u}=t;return(0,c.emitRecaptchaClientGeneratedTokenEvent)({action:n,success:void 0===o,loadTime:_(t),readyTime:R(t),execTime:y(t),length:'string'==typeof s?s.length:void 0,error:o,isPlatformized:u})}function b(t,n){return n-(Date.now()-t)}}),7012352,[4915317,4915312,5046277,5046278,5046280,5046281,5046283]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/google-recaptcha/utils/grecaptcha.d7fceaf2b4.js.map